---
import Layout from '../layouts/Layout.astro';
---

<Layout 
  title="Security & Compliance - Entitle" 
  description="Learn about Entitle's security architecture and data handling practices"
>
  <section class="security-hero">
    <div class="container">
      <div class="security-hero-grid">
        <div class="security-hero-content">
          <h1>Security & Compliance</h1>
          <p class="lead">
            Entitle is architected as a policy processor, not a data processor. 
            We handle decisions, not your customer data.
          </p>
          <div class="security-badges">
            <span class="security-badge">üîí SOC 2 Type II (In Progress)</span>
            <span class="security-badge">üõ°Ô∏è GDPR Compliant</span>
            <span class="security-badge">üåê Multi-Tenant Architecture</span>
          </div>
        </div>
        <div class="security-hero-image">
          <img src="https://images.unsplash.com/photo-1563986768609-322da13575f3?w=800&h=600&fit=crop&q=80" alt="Security and protection" />
        </div>
      </div>
    </div>
  </section>

  <section class="security-content">
    <div class="container">
      <!-- Core Principle -->
      <div class="security-section principle">
        <h2>Core Principle</h2>
        <p class="principle-statement">
          Entitle is a policy decision platform. We evaluate whether a principal can access 
          a capability. We do not store, process, or transmit your customer business data.
        </p>
      </div>

      <!-- GDPR-Friendly Design -->
      <div class="security-section">
        <h2>GDPR-Friendly Design</h2>
        <p>
          Entitle's architecture is designed with privacy by default. We process policy decisions, 
          not personal data.
        </p>
        <div class="details-grid">
          <div class="detail-item">
            <h3>No Personal Data Required</h3>
            <p>
              Entitle works with pseudonymous identifiers like <code>tenant_abc123</code> or 
              <code>org_xyz</code>. We never require names, emails, or other PII.
            </p>
          </div>
          <div class="detail-item">
            <h3>Minimal Data Collection</h3>
            <p>
              We only collect what's necessary to evaluate policies: principal identifiers, 
              capability identifiers, and optional context metadata.
            </p>
          </div>
          <div class="detail-item">
            <h3>Data Minimization</h3>
            <p>
              Policy evaluation logs are retained for operational purposes only and purged 
              on a rolling basis.
            </p>
          </div>
        </div>
      </div>

      <!-- Data Handling -->
      <div class="security-section">
        <h2>Data Handling</h2>
        <div class="data-handling-grid">
          <div class="data-card">
            <img src="https://images.unsplash.com/photo-1633265486064-086b219458ec?w=600&h=400&fit=crop&q=80" alt="Data security" />
            <h3>What We Store</h3>
            <ul>
              <li>Policy definitions and rules</li>
              <li>Pseudonymous principal identifiers (tenant_abc123)</li>
              <li>Capability identifiers (feature_analytics)</li>
              <li>Decision audit logs (who accessed what, when)</li>
              <li>Optional context metadata (environment, region)</li>
            </ul>
          </div>
          <div class="data-card">
            <img src="https://images.unsplash.com/photo-1516321318423-f06f85e504b3?w=600&h=400&fit=crop&q=80" alt="Data protection" />
            <h3>What We Never Store</h3>
            <ul>
              <li>User emails, names, or personal information</li>
              <li>Your application's business data</li>
              <li>Payment or billing information</li>
              <li>Customer records or user profiles</li>
              <li>Feature implementation details</li>
            </ul>
          </div>
        </div>
      </div>
        <p>
          Understanding what Entitle does and doesn't store is critical for compliance and trust.
        </p>
        
        <div class="data-table">
          <div class="data-row header-row">
            <div class="data-cell">Data Type</div>
            <div class="data-cell">Stored?</div>
            <div class="data-cell">Purpose</div>
          </div>
          <div class="data-row">
            <div class="data-cell">Principal IDs</div>
            <div class="data-cell"><span class="badge yes">Yes</span></div>
            <div class="data-cell">Policy evaluation</div>
          </div>
          <div class="data-row">
            <div class="data-cell">Capability IDs</div>
            <div class="data-cell"><span class="badge yes">Yes</span></div>
            <div class="data-cell">Policy evaluation</div>
          </div>
          <div class="data-row">
            <div class="data-cell">Policy Rules</div>
            <div class="data-cell"><span class="badge yes">Yes</span></div>
            <div class="data-cell">Decision logic</div>
          </div>
          <div class="data-row">
            <div class="data-cell">Decision Logs</div>
            <div class="data-cell"><span class="badge yes">Yes</span></div>
            <div class="data-cell">Audit & debugging</div>
          </div>
          <div class="data-row">
            <div class="data-cell">Customer Business Data</div>
            <div class="data-cell"><span class="badge no">No</span></div>
            <div class="data-cell">Not applicable</div>
          </div>
          <div class="data-row">
            <div class="data-cell">User PII</div>
            <div class="data-cell"><span class="badge no">No</span></div>
            <div class="data-cell">Not required</div>
          </div>
          <div class="data-row">
            <div class="data-cell">Payment Information</div>
            <div class="data-cell"><span class="badge no">No</span></div>
            <div class="data-cell">Not applicable</div>
          </div>
        </div>
      </div>

      <!-- Tenant Isolation -->
      <div class="security-section">
        <h2>Tenant Isolation</h2>
        <p>
          Every Entitle customer operates in complete logical isolation.
        </p>
        <ul>
          <li>Each tenant has a unique namespace for policies and principals</li>
          <li>API keys are scoped to individual tenants</li>
          <li>No cross-tenant data access is possible</li>
          <li>Policy evaluation is isolated per tenant at runtime</li>
        </ul>
      </div>

      <!-- Infrastructure Security -->
      <div class="security-section">
        <h2>Infrastructure Security</h2>
        <div class="details-grid">
          <div class="detail-item">
            <h3>TLS Everywhere</h3>
            <p>
              All API traffic is encrypted in transit using TLS 1.3. Entitle does not accept 
              unencrypted connections.
            </p>
          </div>
          <div class="detail-item">
            <h3>API Key Authentication</h3>
            <p>
              Access to the Decision API requires a valid API key. Keys can be rotated 
              without downtime.
            </p>
          </div>
          <div class="detail-item">
            <h3>Secure Defaults</h3>
            <p>
              If a policy cannot be evaluated due to an error, Entitle returns a deny decision 
              by default.
            </p>
          </div>
        </div>
      </div>

      <!-- What Entitle is NOT -->
      <div class="security-section not-section">
        <h2>What Entitle is NOT</h2>
        <p>
          To maintain clarity and set proper expectations:
        </p>
        <ul>
          <li><strong>Not a data processor:</strong> We do not handle your customer data</li>
          <li><strong>Not a billing system:</strong> We do not process payments or store pricing</li>
          <li><strong>Not an enforcement engine:</strong> Your application enforces decisions</li>
          <li><strong>Not a user authentication system:</strong> We assume authentication is handled upstream</li>
        </ul>
      </div>

      <!-- Compliance Status -->
      <div class="security-section">
        <h2>Compliance Status</h2>
        <p>
          Entitle is currently in alpha. We are actively working toward enterprise compliance certifications.
        </p>
        <div class="compliance-note">
          <p>
            <strong>Note:</strong> We do not yet hold SOC 2, ISO 27001, or other formal certifications. 
            If you have specific compliance requirements for alpha participation, please discuss them 
            during your access request.
          </p>
        </div>
      </div>

      <!-- Questions -->
      <div class="security-section cta-section">
        <h2>Questions About Security?</h2>
        <p>
          We're happy to discuss our security architecture and data handling practices in detail.
        </p>
        <a href="/alpha" class="btn-primary">Request Alpha Access</a>
      </div>
    </div>
  </section>
</Layout>

<style>
  .security-hero {
    padding: 4rem 0 3rem;
    border-bottom: 1px solid #e5e7eb;
  }

  .security-hero h1 {
    font-size: 2.5rem;
    font-weight: 700;
    color: #111827;
    margin-bottom: 1rem;
  }

  .security-hero .lead {
    font-size: 1.125rem;
    color: #6b7280;
    max-width: 700px;
    line-height: 1.7;
  }

  .security-content {
    padding: 4rem 0 5rem;
  }

  .security-section {
    margin-bottom: 4rem;
  }

  .security-section:last-child {
    margin-bottom: 0;
  }

  .security-section h2 {
    font-size: 1.875rem;
    font-weight: 700;
    color: #111827;
    margin-bottom: 1.25rem;
    padding-bottom: 0.5rem;
    border-bottom: 2px solid #e5e7eb;
  }

  .security-section h3 {
    font-size: 1.125rem;
    font-weight: 600;
    color: #111827;
    margin-bottom: 0.5rem;
  }

  .security-section p {
    color: #374151;
    line-height: 1.7;
    margin-bottom: 1.25rem;
  }

  .security-section ul {
    color: #374151;
    line-height: 1.8;
    margin-left: 1.5rem;
    margin-bottom: 1.25rem;
  }

  .security-section li {
    margin-bottom: 0.625rem;
  }

  code {
    background: #f3f4f6;
    padding: 0.125rem 0.375rem;
    border-radius: 3px;
    font-size: 0.9375rem;
    font-family: 'Monaco', 'Menlo', monospace;
    color: #1f2937;
  }

  /* Core Principle */
  .principle {
    background: #eff6ff;
    border: 2px solid #2563eb;
    border-radius: 8px;
    padding: 2rem;
  }

  .principle h2 {
    border-bottom: none;
    color: #1e40af;
  }

  .principle-statement {
    font-size: 1.125rem;
    color: #1e40af;
    font-weight: 500;
    margin-bottom: 0;
  }

  /* Details Grid */
  .details-grid {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
    gap: 2rem;
    margin-top: 2rem;
  }

  .detail-item {
    background: #f9fafb;
    padding: 1.5rem;
    border-radius: 6px;
    border: 1px solid #e5e7eb;
  }

  .detail-item p {
    margin-bottom: 0;
    font-size: 0.9375rem;
  }

  /* Data Table */
  .data-table {
    margin-top: 2rem;
    border: 1px solid #e5e7eb;
    border-radius: 8px;
    overflow: hidden;
  }

  .data-row {
    display: grid;
    grid-template-columns: 2fr 1fr 2fr;
    border-bottom: 1px solid #e5e7eb;
  }

  .data-row:last-child {
    border-bottom: none;
  }

  .header-row {
    background: #f9fafb;
    font-weight: 600;
  }

  .data-cell {
    padding: 1rem 1.25rem;
    border-right: 1px solid #e5e7eb;
    color: #374151;
  }

  .data-cell:last-child {
    border-right: none;
  }

  .badge {
    display: inline-block;
    padding: 0.25rem 0.625rem;
    border-radius: 4px;
    font-size: 0.875rem;
    font-weight: 600;
  }

  .badge.yes {
    background: #dbeafe;
    color: #1e40af;
  }

  .badge.no {
    background: #f3f4f6;
    color: #6b7280;
  }

  /* Not Section */
  .not-section {
    background: #fef3c7;
    border: 2px solid #f59e0b;
    border-radius: 8px;
    padding: 2rem;
  }

  .not-section h2 {
    border-bottom: none;
    color: #92400e;
  }

  .not-section p,
  .not-section ul {
    color: #78350f;
  }

  /* Compliance Note */
  .compliance-note {
    background: #fef2f2;
    border-left: 4px solid #ef4444;
    padding: 1.25rem;
    margin-top: 1.5rem;
    border-radius: 4px;
  }

  .compliance-note p {
    margin-bottom: 0;
    color: #7f1d1d;
  }

  .compliance-note strong {
    color: #991b1b;
  }

  /* CTA Section */
  .cta-section {
    text-align: center;
    padding: 3rem 2rem;
    background: #f9fafb;
    border-radius: 8px;
  }

  .cta-section h2 {
    border-bottom: none;
  }

  .btn-primary {
    display: inline-block;
    background: #2563eb;
    color: white;
    padding: 0.875rem 1.75rem;
    border-radius: 6px;
    text-decoration: none;
    font-weight: 600;
    margin-top: 1rem;
    transition: background 0.15s;
  }

  .btn-primary:hover {
    background: #1d4ed8;
  }

  /* Responsive */
  @media (max-width: 768px) {
    .security-hero {
      padding: 3rem 0 2rem;
    }

    .security-hero h1 {
      font-size: 2rem;
    }

    .security-section h2 {
      font-size: 1.5rem;
    }

    .details-grid {
      grid-template-columns: 1fr;
      gap: 1.5rem;
    }

    .data-row {
      grid-template-columns: 1fr;
    }

    .data-cell {
      border-right: none;
      border-bottom: 1px solid #e5e7eb;
    }

    .data-row:last-child .data-cell:last-child {
      border-bottom: none;
    }
  }
</style>
